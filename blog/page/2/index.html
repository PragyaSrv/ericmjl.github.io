<!doctype html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <!-- Bootstrap v4beta Imports -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

    <style media="screen">
        body {
            padding-top: 70px;
            padding-bottom: 70px;
        }
    </style>

    
    

    <!-- Google Analytics -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-12498603-2', 'auto');
        ga('send', 'pageview');
    </script>

    <!-- ClustrMaps Tracking -->
    <!-- <script type="text/javascript" id="clstr_globe" src="//cdn.clustrmaps.com/globe.js?d=nhKoDpoTjWz4pC6CwI-fSy4hPoJ1uXwTLCfMCT3OK_8"></script> -->

    <!-- FontAwesome embed -->
    <!-- <script src="https://use.fontawesome.com/cb9dbe8e41.js"></script> -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/custom.css">

    <!-- Mathjax -->
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>

</head>

<title>Blog - Eric J. Ma's Personal Site</title>
<body class="body">
    <nav class="navbar navbar-expand-sm navbar-light fixed-top bg-light">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#local-links" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="local-links">
            <ul class="navbar-nav mr-auto">
                
                <li class="nav-item">
                    <a class="nav-link" href="/"><i class="fa fa-home" aria-hidden="true"></i> Home</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://ericmjl.github.io/resume"><i class="fa far fa-file-alt" aria-hidden="true"></i> Resume</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/blog"><i class="fa fa-rss" aria-hidden="true"></i> Blog</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/open-source"><i class="fa fa-code" aria-hidden="true"></i> Open Source</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/projects"><i class="fa fa-briefcase" aria-hidden="true"></i> Projects</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/talks"><i class="fa fa-microphone" aria-hidden="true"></i> Talks</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/teaching"><i class="fa fa-university" aria-hidden="true"></i> Teaching</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/bio"><i class="fa fa-user" aria-hidden="true"></i> Bio</a>
                </li>
                
            </ul>
        </div>
    </nav>
    <div class="container">
        
  
    
  <!-- Import stylesheet -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>

  <!-- Set title style -->
  
    <h1><a href="../../../blog/2019/3/20/how-i-work/">How I Work</a></h1>
  

  <!-- Append author -->
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2019-03-20
  
  </p>
  <!-- Append tags after author -->
  <p>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/data science/">
          data science
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/productivity/">
          productivity
      </a>
      
  </p>
  

  <!-- Put post body -->
  <p>I was inspired to write this because of Will Wolf’s interview with DeepLearning.AI, in which I found a ton of similarities between how both of us work. As such, I thought I’d write down what I use at work to get things done.</p>
<h2 id="tooling">Tooling</h2><p>For a data scientist, I think tooling is of very high importance: mastery over our tools keeps us productive. Here’s a sampling of what I use at work:</p>
<ul>
<li>Compute: I have my own MacBook, but I prefer freeloading off my colleague’s workstation, which is connected to our HPC compute cluster, allowing me to do parallelization with Dask!</li>
<li>Editors/IDEs: VSCode + Jupyter Lab (JLab). Lots of plugins for VSCode!</li>
<li>Terminal: iTerm, with my <a href="https://github.com/ericmjl/dotfiles"><code>dotfiles</code></a> providing a high degree of customization. I also use the VSCode and JLab terminals where convenient.</li>
<li>General Purpose: Python, Dask, git</li>
<li>ML/Stats: <code>scikit-learn</code>, <code>jax</code>, <code>pymc3</code></li>
<li>Data wrangling: <code>pandas</code>, <code>pyjanitor</code> (a package I wrote to provide convenience APIs for data cleaning)</li>
<li>Data visualization: <code>matplotlib</code>, <code>seaborn</code>, <code>holoviews</code></li>
<li>App development: <code>flask</code></li>
</ul>
<p>As you probably can see, I’m a very Python-centric person!</p>
<h2 id="daily/weekly-routines">Daily/Weekly Routines</h2><p>Most of my work necessitates long stretches of thinking and hacking time. Without that, I’m unable to get into “the zone” to do anything productive. Hence, I have a habit of packing meetings onto Mondays (a.k.a. “Meeting Mondays”). Backup times for meetings, which I prefer to not do, are 11 am and 1 pm, bookending lunch time so that I don’t end up with a fragmented morning/afternoon. The only exceptions I make are for my two high-priority team meetings, for which I defer to the rest of the team. I’m glad that my managers understand the need for long stretches of hacking time, and have stuck to Monday one-on-one meetings.</p>
<p>Hence, almost every day from Tuesday through to Friday, I have long stretches of pre-allocated time for hacking. It’s data science scheduling bliss! It also means I turn down a lot of “can I meet you to chat” invites - unless we can pack them on Monday!</p>
<p>On Friday, I make a point to try to work remotely. It helps with sanity, particularly in the winter, when the commute gets harsh and I can’t bike. Fridays also are the days on which I try to do my open source work.</p>
<h2 id="pair-coding">Pair Coding</h2><p>Pair coding with others on mutual projects has been a very productive endeavor, <a href="https://ericmjl.github.io/blog/2019/3/1/pair-coding-why-and-how-for-data-scientists/">which I have written about before</a>. Unlike weekly update meetings, I plan for pair coding on an as-needed basis. We have a pre-defined goal for what we want to accomplish, including a conceivably achievable goal and a stretch goal; achieving the easier one keeps us motivated. It follows the “no agenda, no meeting” rule of thumb by which I protect my time.</p>
<p>I found that a good setup is really necessary for pair coding to be successful. A minimum is a dual-monitor setup, with one extra keyboard + mouse for my coding partner.</p>
<p>One thing I didn’t mention in my previous blog post was how knowledge transfer happens. Here’s how I think it works. We have one in the “driver’s seat”, and the other in the observer role. Knowledge transfer generally happens from the more experienced person to the less experienced one, and the driver doesn’t necessarily have to be the more experienced one. For example, when pair coding with my intern, I play the role of observer and may dictate code or outline what needs to be done, but I don’t actively take over on my keyboard unless there’s a situation that shows up that is irrelevant to the coding session goals. On the other hand, if there’s a codebase I’ve developed for which I need to play the tour guide role, I will be in the driver’s seat, while the observer will help me catch peripheral errors that I’m making.</p>
<h2 id="learning-new-things">Learning New Things</h2><p>Pair coding has been one way I learn new things. For example, with my colleague Zach as the observer, we hacked together a simple dashboard project using Flask, Holoviews and Panel.</p>
<p>I’m not very mathematically-savvy, in that algebra is difficult for me to follow. (I’m mildly algebra-blind, but getting better now.) Ironically, code, which is algebraic in nature too, but works with plain English names, works much better for me. Implementing algorithms and statistical methods using <code>jax</code> (for things that involve differential computing) and <code>PyMC3</code> (for all things Bayesian) has served to be very educational. While implementing, I also impose some software abstractions on the math, and this also forces me to organize my knowledge, which also helps learning. Implementing things on the computer is also the perfect way to learn by teaching: The computer is the ultimately dumb student, as it will execute exactly as you tell it, mistakes included!</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2019/3/20/how-i-work/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- Import stylesheet -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>

  <!-- Set title style -->
  
    <h1><a href="../../../blog/2019/3/1/pair-coding-why-and-how-for-data-scientists/">Pair Coding: Why and How for Data Scientists</a></h1>
  

  <!-- Append author -->
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2019-03-01
  
  </p>
  <!-- Append tags after author -->
  <p>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/data science/">
          data science
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/programming/">
          programming
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/best practices/">
          best practices
      </a>
      
  </p>
  

  <!-- Put post body -->
  <h2 id="introduction">Introduction</h2><p>While at work, I've been experimenting with pair coding with other data science-oriented colleagues. My experiences tell me that this is something extremely valuable to do. I'd like to share here the "why" and the "how" on pair coding, but focused towards data scientists.</p>
<h2 id="what-is-pair-coding?">What is pair coding?</h2><p>Pair coding is a form of programming where two people work together on a single code base together. It usually involves one person on the keyboard and another talking through the problem and observing for issues, such as syntax, logic, or code style. Occasionally, they may swap who is on the keyboard. In other words, one is the "creator", and the other is the "critic" (but in a positive, constructive fashion).</p>
<h2 id="what-s-your-history-with-pair-coding?">What's your history with pair coding?</h2><p>I was inspired by a few places. Firstly, there are a wealth of blog posts detailing the potential benefits and pitfalls of pair coding, in a software developer's context. (A quick Google search will lead you to them.) Secondly, I had, at work, experimented with "pair hacking" sessions, which involved more than coding, including white-boarding a problem to get a feel for its scope, and it turned out to be pretty productive. Thirdly, I was inspired by <a href="https://www.newyorker.com/magazine/2018/12/10/the-friendship-that-made-google-huge">a New Yorker article on Jeff and Sanjay</a>, in which part of it chronicled how they worked as a pair to solve the toughest problems at Google.</p>
<p>Now, because I'm not a software engineer by training, and because don't have extensive experience beforehand, and because there are no data-science-oriented resources for pair coding that I have read before (I'd love to read them if you know of any!), I've had to be adapt what I read for software development to a data science context.</p>
<h2 id="what-are-the-potential-benefits-of-pair-coding?">What are the potential benefits of pair coding?</h2><p>I can see at least the following benefits, if not more that I have yet to discover:</p>
<ol>
<li>Instant peer review over data science logic and code. Because we are talking through a problem while coding it up, we can instantly check whether our logic is correct against each other.</li>
<li>Knowledge transfer. In my experience, I've had productive pair-coding sessions with another colleague who has a better grasp of the project than I do. Hence, I contribute &amp; teach the technical component, while I also learn the broader project context better.</li>
<li>Building trust. We all know that the more closely you work with someone, the more rough corners get rubbed off.</li>
</ol>
<h2 id="what-pre-requisites-do-you-see-for-a-productive-pair-programming-session?">What pre-requisites do you see for a productive pair programming session?</h2><ol>
<li>A long, continuous, and uninterrupted time slot (at least 2-3 hours in length) to maintain continuity.</li>
<li>A defined goal or question that we are seeking to answer - keeps us focused on what needs to be done.</li>
<li>That goal should also be plausibly achievable within the 2-3 hour timeframe. </li>
<li>Large monitors for both parties to look at, or a code-sharing platform where both can see the code without needing to physically huddle.</li>
<li>A place where we can talk without feeling hindered.</li>
<li>No impromptu interruptions from other individuals.</li>
<li>Complementary and intersecting skillsets.</li>
<li>Open-minded individuals who are willing to learn. (Ego-free.)</li>
</ol>
<h2 id="where-does-pair-coding-differ-for-data-scientists-vs.-software-engineers?">Where does pair coding differ for data scientists vs. software engineers?</h2><p>I think the differences at best are subtle, not necessarily overt.</p>
<p>The biggest difference that I can think of might be in clarity. To the best of my knowledge, software engineers work with pretty well-defined requirements. The only hiccups that I can imagine that may occur are in unforeseen logic/code blockers. Data scientists, on the other hand, often are exploring and defining the requirements as things go along. In other words, we are working with more unknowns than a software engineer might.</p>
<p>An example is a model I built with a colleague at work that involved groups of groups of samples. We weren't able to envision the final model right at the beginning, and code towards it. Rather, we built the model iteratively, starting with highly simplifying assumptions, discussing which ones to refine, and iteratively building the model as we went forward.</p>
<p>Perhaps a related difference is that as data scientists, because of potentially greater uncertainty surrounding the final product, we may end up talking more about project direction than one would as a software engineer. But that's probably just a minor detail.</p>
<h2 id="do-you-have-any-memorable-quotes-from-the-new-yorker-article?">Do you have any memorable quotes from the New Yorker article?</h2><p>Yes, a number of them.</p>
<p>One on scaling things up.</p>
<blockquote class="blockquote">
<p>Alan Eustace became the head of the engineering team after Rosing left, in 2005. “To solve problems at scale, paradoxically, you have to know the smallest details,” Eustace said.</p>
</blockquote><p>Another on pair programming as an uncommon practice:</p>
<blockquote class="blockquote">
<p>“I don’t know why more people don’t do it,” Sanjay said, of programming with a partner.</p>
<p>“You need to find someone that you’re gonna pair-program with who’s compatible with your way of thinking, so that the two of you together are a complementary force,” Jeff said.</p>
</blockquote>
  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2019/3/1/pair-coding-why-and-how-for-data-scientists/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- Import stylesheet -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>

  <!-- Set title style -->
  
    <h1><a href="../../../blog/2019/1/28/minimum-viable-products-matter/">Minimum Viable Products (MVPs) Matter</a></h1>
  

  <!-- Append author -->
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2019-01-28
  
  </p>
  <!-- Append tags after author -->
  <p>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/data science/">
          data science
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/data products/">
          data products
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/minimum viable products/">
          minimum viable products
      </a>
      
  </p>
  

  <!-- Put post body -->
  <p>MVPs matter because they afford us at least two things:</p>
<ol>
<li>Psychological safety</li>
<li>Credibility</li>
</ol>
<p>Psychological safety comes from knowing that we have at least a working prototype that we can deliver to whomever is going to consume our results. We aren't stuck in the land of imaginary ideas without something tangible for others to interact with.</p>
<p>Credibility comes about because with the MVP on hand, others now can trust on our ability to execute on an idea. Prior to that, all that others have to go off are promises of "a thing".</p>
<p>Build your MVPs. They're a good thing!</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2019/1/28/minimum-viable-products-matter/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- Import stylesheet -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>

  <!-- Set title style -->
  
    <h1><a href="../../../blog/2019/1/21/advi-scalable-bayesian-inference/">ADVI: Scalable Bayesian Inference</a></h1>
  

  <!-- Append author -->
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2019-01-21
  
  </p>
  <!-- Append tags after author -->
  <p>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/bayesian/">
          bayesian
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/variational inference/">
          variational inference
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/data science/">
          data science
      </a>
      
  </p>
  

  <!-- Put post body -->
  <h2 id="introduction">Introduction</h2><p>You never know when scalability becomes an issue. Indeed, scalability necessitates a whole different world of tooling.</p>
<p>While at work, I've been playing with a model - a Bayesian hierarchical 4-parameter dose response model, to be specific. With this model, the overall goal (without going into proprietary specifics) was parameter learning - what's the 50th percentile concentration, what's the max, what's the minimum, etc.; what was also important was quantifying the uncertainty surrounding these parameters.</p>
<h2 id="prototype-phase">Prototype Phase</h2><p>Originally, when I prototyped the model, I used just a few thousand samples, which was trivial to fit with NUTS. I also got the model specification (both the group-level and population-level priors) done using those same few thousand.</p>
<p>At some point, I was qualitatively and quantitatively comfortable with the model specification. Qualitatively - the model structure reflected prior biochemical knowledge. Quantitatively, I saw good convergence when examining the sampling traces, as well as the shrinkage phenomena.</p>
<h2 id="scaling-up">Scaling Up</h2><p>Once I reached that point, I decided to scale up to the entire dataset: 400K+ samples, 3000+ groups.</p>
<p>Fitting this model with NUTS with the full dataset would have taken a week, with no stopping time guarantees at the end of an overnight run - when I left the day before, I was still hoping for 5 days. However, switching over to ADVI (automatic differentiation variational inference) was a key enabler for this model: I was able to finish fitting the model with ADVI in just 2.5 hours, with similar uncertainty estimates (it'll never end up being identical, given random sampling).</p>
<h2 id="thoughts">Thoughts</h2><p>I used to not appreciate that ADVI could be useful for simpler models; in the past, I used to think that ADVI was mainly useful in Bayesian neural network applications - in other words, with large parameter and large data models.</p>
<p>With this example, I'm definitely more informed about what "scale" can mean: both in terms of number of parameters in a model, and in terms of number of samples that the model is fitted on. In this particular example, the model is simple, but the number of samples is so large that ADVI becomes a feasible alternative to NUTS MCMC sampling.</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2019/1/21/advi-scalable-bayesian-inference/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- Import stylesheet -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>

  <!-- Set title style -->
  
    <h1><a href="../../../blog/2018/12/25/conda-hacks-for-data-science-efficiency/">Conda hacks for data science efficiency</a></h1>
  

  <!-- Append author -->
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2018-12-25
  
  </p>
  <!-- Append tags after author -->
  <p>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/data science/">
          data science
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/conda/">
          conda
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/hacks/">
          hacks
      </a>
      
  </p>
  

  <!-- Put post body -->
  <p>The <code>conda</code> package manager has, over the years, become an integral part of my workflow. I use it to manage project environments, and have built a bunch of very simple hacks around it that you can adopt too. I'd like to share them with you, alongside the rationale for using them.</p>
<h2 id="hack-1:-set-up-your-.condarc">Hack #1: Set up your <code>.condarc</code></h2><p><strong>Why?</strong> It will save you a few keystrokes each time you want to do something with <code>conda</code>. For example, in my <code>.condarc</code>, I have the following:</p>
<div class="hll"><pre><span></span><span class="c1"># Set the channels that the `conda install` command will </span>
<span class="c1"># automatically search through.</span>
<span class="nt">channels</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">defaults</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ericmjl</span>

<span class="c1"># Always accept installation. Is convenient, but always </span>
<span class="c1"># double-check!</span>
<span class="nt">always_yes</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
<p>For more information on how to configure your <code>.condarc</code>, check the <a href="https://conda.io/docs/user-guide/configuration/use-condarc.html">online documentation</a>!</p>
<h2 id="hack-2:-use-one-environment-spec-file-per-project">Hack #2: Use one environment spec file per project</h2><p>This assumes that you have the habit of putting all files related to one project inside one folder, using subdirectories for finer-grained organization.</p>
<p><strong>Why?</strong> It will ensure that you have one version-controlled, authoritative specification for the packages that are associated with the project. This is good for (1) reproducibility, as you can send it to a colleague and have them reproduce the environment, and (2) will enable Hack #3, which I will showcase afterwards.</p>
<div class="hll"><pre><span></span><span class="c1"># file name: environment.yml</span>

<span class="c1"># Give your project an informative name</span>
<span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">project-name</span>

<span class="c1"># Specify the conda channels that you wish to grab packages from, in order of priority.</span>
<span class="nt">channels</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">defaults</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ericmjl</span>

<span class="c1"># Specify the packages that you would like to install inside your environment. Version numbers are allowed, and conda will automatically use its dependency solver to ensure that all packages work with one another.</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">python=3.7</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">conda</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">jupyterlab</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">scipy</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">numpy</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">pandas</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">pyjanitor</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">pandas</span>
<span class="c1"># There are some packages which are not conda-installable. You can put the pip dependencies here instead.</span>
<span class="p p-Indicator">-</span> <span class="nt">pip</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">tqdm</span>  <span class="c1"># for example only, tqdm is actually available by conda.</span>
</pre></div>
<p>A hack that I have related to this is that I use TextExpander shortcut to populate a starting environment spec file.</p>
<p>Additionally, if I want to install a new package, rather than simply typing <code>conda install &lt;packagename&gt;</code>, I will add the package to the environment spec file, and then type <code>conda env update -f environment.yml</code>, as more often than not, my default is to continue using the package I added.</p>
<p>For more details on what the environment spec file is all about, <a href="https://conda.io/docs/user-guide/tasks/manage-environments.html#create-env-file-manually">read the online docs</a>!</p>
<h2 id="hack-3:-use-conda-auto-env">Hack 3: use <code>conda-auto-env</code></h2><p>Written by <a href="https://chdoig.github.io">Christine Doig</a>, <a href="https://github.com/chdoig/conda-auto-env"><code>conda-auto-env</code></a> is a bash hack that enables you to automatically activate an environment once you enter into a project directory, <em>as long as an <code>environment.yml</code> file already exists in the directory</em>. If the environment does not already exist, then <code>conda-auto-env</code> will automatically create one based on the <code>environment.yml</code> file in your project directory.</p>
<p><strong>Why?</strong> If you have many projects that you are working on, then it will greatly reduce the amount of effort used to remember which project to activate.</p>
<p><code>conda-auto-env</code> looks like this:</p>
<div class="hll"><pre><span></span><span class="c1"># File: .conda-auto-env</span>
<span class="c1">#!/bin/bash</span>

<span class="k">function</span> conda_auto_env<span class="o">()</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">[</span> -e <span class="s2">&quot;environment.yml&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="c1"># echo &quot;environment.yml file found&quot;</span>
    <span class="nv">ENV</span><span class="o">=</span><span class="k">$(</span>head -n <span class="m">1</span> environment.yml <span class="p">|</span> cut -f2 -d <span class="s1">&#39; &#39;</span><span class="k">)</span>
    <span class="c1"># Check if you are already in the environment</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$PATH</span> !<span class="o">=</span> *<span class="nv">$ENV</span>* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
      <span class="c1"># Check if the environment exists</span>
      conda activate <span class="nv">$ENV</span>
      <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        :
      <span class="k">else</span>
        <span class="c1"># Create the environment and activate</span>
        <span class="nb">echo</span> <span class="s2">&quot;Conda env &#39;</span><span class="nv">$ENV</span><span class="s2">&#39; doesn&#39;t exist.&quot;</span>
        conda env create -q
        conda activate <span class="nv">$ENV</span>
      <span class="k">fi</span>
    <span class="k">fi</span>
  <span class="k">fi</span>
<span class="o">}</span>

<span class="nb">export</span> <span class="nv">PROMPT_COMMAND</span><span class="o">=</span>conda_auto_env
</pre></div>
<p>To use it, you have two options. You can either copy/paste the whole original script into your <code>.bashrc</code>, or you can put it in a file called <code>.conda-auto-env</code>, and source it from your <code>.bashrc</code>. I recommend the latter, as it makes managing your <code>.bashrc</code> easier:</p>
<div class="hll"><pre><span></span><span class="c1"># File: .bashrc</span>
<span class="nb">source</span> /path/to/.conda-auto-env
</pre></div>
<h2 id="hack-4:-hijack-bash-aliases-for-conda-commands">Hack 4: hijack bash aliases for <code>conda</code> commands</h2><p>I use aliases to save myself a few keystrokes whenever I'm at the terminal. This is a generalizable bash hack, but here it is as applied to <code>conda</code> commands.</p>
<p>Anyways, these are the commands that I use most often, which I have found it useful to alias:</p>
<div class="hll"><pre><span></span><span class="c1"># File: .aliases</span>
<span class="nb">alias</span> <span class="nv">ceu</span><span class="o">=</span><span class="s2">&quot;conda env update&quot;</span>
<span class="nb">alias</span> <span class="nv">cl</span><span class="o">=</span><span class="s2">&quot;conda list&quot;</span>
<span class="nb">alias</span> <span class="nv">ci</span><span class="o">=</span><span class="s2">&quot;conda install&quot;</span>
<span class="nb">alias</span> <span class="nv">cr</span><span class="o">=</span><span class="s2">&quot;conda remove&quot;</span>
</pre></div>
<p>Make sure your aliases don't clash with existing commands that you use!</p>
<p>Then, source <code>.aliases</code> in your <code>. bashrc</code>:</p>
<div class="hll"><pre><span></span><span class="c1"># File: .bashrc</span>
<span class="nb">source</span> /path/to/.aliases
</pre></div>
<p>Now, all of your defined aliases will be available in your bash shell.</p>
<p>The idea/pattern, as I mentioned earlier, is generalizable beyond just bash commands. (I have <code>ls</code> aliased for <code>exa</code>, and <code>l</code> aliased for <code>ls</code> - the epitome of laziness!)</p>
<h2 id="conclusion">Conclusion</h2><p>I hope you found these bash and <code>conda</code> hacks to be useful. Hopefully they will help you become more productive and efficient!</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2018/12/25/conda-hacks-for-data-science-efficiency/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  

  
  <div class="pagination">
    
      <a href="../../../blog/">&laquo; Previous</a>
    
    | 2 |
    
      <a href="../../../blog/page/3/">Next &raquo;</a>
    
  </div>


    </div>

    <nav class="navbar navbar-expand-sm navbar-light fixed-bottom bg-light">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#external-links" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="external-links">
            <ul class="navbar-nav mr-auto">
                
                <li class="nav-item">
                    <a class="nav-link" href="https://www.linkedin.com/in/ericmjl"><i class="fab fa-linkedin" aria-hidden="true"></i> LinkedIn</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://twitter.com/ericmjl"><i class="fab fa-twitter" aria-hidden="true"></i> Twitter</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://github.com/ericmjl"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://stackoverflow.com/users/1274908/ericmjl"><i class="fab fa-stack-overflow" aria-hidden="true"></i> Stack Overflow</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://shortwhale.com/ericmjl"><i class="far fa-envelope" aria-hidden="true"></i> Contact Me</a>
                </li>
                
            </ul>
        </div>
    </nav>
    <!-- Boostrap JS imports -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
</body>
