<!doctype html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <!-- Bootstrap v4beta Imports -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

    <style media="screen">
        body {
            padding-top: 70px;
            padding-bottom: 70px;
        }
    </style>

    
    

    <!-- Google Analytics -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-12498603-2', 'auto');
        ga('send', 'pageview');
    </script>

    <!-- ClustrMaps Tracking -->
    <!-- <script type="text/javascript" id="clstr_globe" src="//cdn.clustrmaps.com/globe.js?d=nhKoDpoTjWz4pC6CwI-fSy4hPoJ1uXwTLCfMCT3OK_8"></script> -->

    <!-- FontAwesome embed -->
    <!-- <script src="https://use.fontawesome.com/cb9dbe8e41.js"></script> -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/custom.css">

    <!-- Mathjax -->
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML">
    </script>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>

</head>

<title>Blog - Eric J. Ma's Personal Site</title>
<body class="body">
    <nav class="navbar navbar-expand-sm navbar-light fixed-top bg-light">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#local-links" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="local-links">
            <ul class="navbar-nav mr-auto">
                
                <li class="nav-item">
                    <a class="nav-link" href="/"><i class="fa fa-home" aria-hidden="true"></i> Home</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://ericmjl.github.io/resume"><i class="fa far fa-file-alt" aria-hidden="true"></i> Resume</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/blog"><i class="fa fa-rss" aria-hidden="true"></i> Blog</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/open-source"><i class="fa fa-code" aria-hidden="true"></i> Open Source</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/projects"><i class="fa fa-briefcase" aria-hidden="true"></i> Projects</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/talks"><i class="fa fa-microphone" aria-hidden="true"></i> Talks</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/teaching"><i class="fa fa-university" aria-hidden="true"></i> Teaching</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/bio"><i class="fa fa-user" aria-hidden="true"></i> Bio</a>
                </li>
                
            </ul>
        </div>
    </nav>
    <div class="container">
        
  
    
  <!-- Import stylesheet -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>

  <!-- Set title style -->
  
    <h1><a href="../../../blog/2019/5/10/pycon-2019-tutorial-and-conference-days/">PyCon 2019 Tutorial and Conference Days</a></h1>
  

  <!-- Append author -->
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2019-05-10
  
  </p>
  <!-- Append tags after author -->
  <p>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/pycon 2019/">
          pycon 2019
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/conferences/">
          conferences
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/data science/">
          data science
      </a>
      
  </p>
  

  <!-- Put post body -->
  <p>It's just been days since I got back from PyCon, and I'm already looking forward to 2020! But I thought it'd be nice to continue the recap.</p>
<p>This year at PyCon, I co-led two tutorials, one with Hugo Bowne-Anderson on <a href="https://us.pycon.org/2019/schedule/presentation/77/">Bayesian Data Science by Simulation</a>, and the other with Mridul Seth on <a href="https://us.pycon.org/2019/schedule/presentation/70/">Network Analysis Made Simple</a>.</p>
<p>I always enjoy teaching with <a href="../../../blog/2019/5/10/pycon-2019-tutorial-and-conference-days/#">Hugo</a>. He brought his giant sense of humour, both figuratively and literally, to this tutorial, and melded it with his deep grasp of the math behind Bayesian statistics, delivering a workshop that, by many points of feedback, is excellent. Having reviewed the tutorial feedback, we've got many ideas for our showcase of Part II at SciPy 2019!</p>
<p>This year was the first year that Mridul and I swapped roles. In previous years, he was my TA, helping tutorial participants while I did the main lecturing. This year, the apprentice became the master, and a really good one indeed! Looking forward to seeing him shine more in subsequent tutorial iterations.</p>
<p>During the conference days, I spent most of my time either helping out with Financial Aid, or at the Microsoft booth. As I have alluded to in multiple tweets, Microsoft's swag this year was the best of them all. Microelectronics kits in a blue lunch box from Adafruit, and getting set up with <a href="https://azure.microsoft.com/en-us/">Azure</a>. In fact, this website is now re-built with each push on Azure pipelines! Indeed, <a href="https://twitter.com/zooba">Steve Dowell</a> from Microsoft told me that this year's best swag was probably getting setup with Azure, and I'm 100% onboard with that! (Fun fact, Steve told me that he's never been called by his Twitter handle (<code>zooba</code>) in real-life... until we met.)</p>
<p>I also delivered a talk this year, which essentially amounted to a <a href="https://us.pycon.org/2019/schedule/presentation/174/">formal rant against canned statistical procedures</a>. I had a ton of fun delivering this talk. The usual nerves still get to me, and I had to do a lot of talking-to-myself-style rehearsals to work off those nerves. For the first time, I also did office hours post-talk at an Open Space, where for one hour, we talked about all things Bayes. Happy to have met everybody who came by; I genuinely enjoyed the chat!</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2019/5/10/pycon-2019-tutorial-and-conference-days/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- Import stylesheet -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>

  <!-- Set title style -->
  
    <h1><a href="../../../blog/2019/5/8/pycon-2019-sprints/">PyCon 2019 Sprints</a></h1>
  

  <!-- Append author -->
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2019-05-08
  
  </p>
  <!-- Append tags after author -->
  <p>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/pycon/">
          pycon
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/software development/">
          software development
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/sprint/">
          sprint
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/open source/">
          open source
      </a>
      
  </p>
  

  <!-- Put post body -->
  <p>This year was the first year that I decided to lead a sprint! The sprint I led was for <code>pyjanitor</code>, a package that I developed with my colleague, Zach Barry, and a remote collaborator in NYC, Sam Zuckerman (whom I've never met in person!). This being the first sprint I've ever led, I think I was lucky to stumble upon a few ideas that made for a productive, collaborative, and most importantly, fun sprint.</p>
<h2 id="pyjanitor?">pyjanitor?</h2><p>I'm going to deliver a talk on <code>pyjanitor</code> later in the year, so I'll save the details for that talk. The short description of <code>pyjanitor</code> is that if you have <code>pandas</code> one-liners that are difficult to remember, they should become a function in <code>pyjanitor</code>; if you have a 10-liner that you always copy/paste from another source, they should become a function in <code>pyjanitor</code>.</p>
<h2 id="sprints?">Sprints?</h2><p>Code sprints are a part of PyCon, and it's basically one to four days of intense and focused software development on a single project.</p>
<p>Project sprint leads first pitch their projects at the "<em>Sprintros</em>", where they indicate what days they will be sprinting, and at what times. The next day, we indicate on which rooms our projects will be sprinting. Volunteers from the conference, who would like to make an open source project contribution, then identify projects they would like to come sprint with.</p>
<p>In some senses, there's no way for a sprint leader to know how popular their sprint will be <em>a priori</em>. We have to be prepared to handle a range of scenarios from sprinting with just one other person to sprinting with a crowd.</p>
<h2 id="structure">Structure</h2><h3 id="preparation">Preparation</h3><p>In preparation for the sprint, I absorbed many lessons learned over the years of sprinting on others' projects.</p>
<p>The most obvious one was to ensure that every sprinter had something to do right from the get-go. Having a task from the get-go keeps sprinters, especially newcomers, engaged right from the beginning. This motivated the requirement to make a doc fix before making a code fix. (You can read more below on how we made this happen.) I wrote out this requirement in a number of places, and by the time the sprint day rolled by, this rolled off pretty naturally.</p>
<p>The second thing that I did to prep was to triage existing issues and label them as being beginner- or intermediate-friendly, and whether they were doc, infrastructure, or code contributions.</p>
<p>Those two things were the my highest priority preparation for the sprint, and I think that helped a ton.</p>
<h3 id="doc-fixes">Doc Fixes</h3><p>This sprint, I gave the structure some thought, and settled on the following: Before making a code contribution, I required a docs contribution.</p>
<p>Docs contributions could be of any scale:</p>
<ul>
<li>A typographical, grammatical, or spelling error.</li>
<li>A docstring that was unclear.</li>
<li>Installation/setup instructions that are unclear.</li>
<li>A sentence/phrase/word choice that didn't make sense.</li>
<li>New example/tutorial notebooks using the library.</li>
</ul>
<p>I think this worked well for the following reasons:</p>
<ol>
<li>New contributors must read the docs before developing on the project, and hence become familiar with the project.</li>
<li>There's always something that can be done better in the docs, and hence, there is something that can be immediately acted on.</li>
<li>The task is a pain point personally uncovered by the contributor, and hence the contributor has the full context of the problem. </li>
<li>The docs don't break the code/tests, and hence doc contributions are a great way make a contribution without wrestling with more complex testing.</li>
<li>Starting <em>everybody</em> who has never worked on <code>pyjanitor</code> on docs is an egalitarian way of on-boarding every newcomer, beginner and experienced individuals alike. Nobody gets special treatment.</li>
</ol>
<p>For each individual's contribution, I asked them to first raise an issue on the GitHub issue tracker describing the contribution that they would like to make, and then clearly indicate in the comments that they would like to work on it. Then, they would go through the process of doing the documentation fix, from forking the repository, cloning it locally, creating a new branch, making edits, committing, pushing, and PR-ing.</p>
<p>If two people accidentally ended up working on the same docs issue, I would assess the effort of the later one, and if it was substantial enough, I would allow them to consider it done, and move onto a different issue.</p>
<p>Going forth, as the group of contributors expands, I will enforce this "docs-first" requirement only for newcomer sprinters, and request experienced ones to help manage the process.</p>
<h3 id="code-contributions">Code Contributions</h3><p>Once the docs contributions were done, sprinters were free to either continue with more docs contributions, or provide a code contribution.</p>
<p>Code contributions could be of one of the following:</p>
<ol>
<li>New function contributions.</li>
<li>Cleaner implementations of existing functions.</li>
<li>Restructuring of existing functions.</li>
<li>Identification of functions to deprecate (very important!)</li>
<li>Infrastructural changes to docs, build system, and more.</li>
</ol>
<p>The process for doing this was identical to docs: raise an issue, claim it, and then make a new branch with edits, and finally PR it.</p>
<h2 id="my-role">My Role</h2><p>For both days, we had more than 10 people sprint on <code>pyjanitor</code>. Many who were present on the 1st day (and didn't have a flight to catch) came back on the 2nd day. As such, I actually didn't get much coding done. Instead, I took on the following roles:</p>
<ol>
<li>Q&amp;A person: Answering questions about what would be acceptable contributions, technical (read: git) issues, and more.</li>
<li>Issue labeller and triage-r: I spent the bulk of my downtime (and pre-/post-sprint time) tagging issues on the GitHub issue tracker and marking them as being available or unavailable for hacking on, and tagging them with whether they were docs-related, infrastructure-related, or code enhancements. </li>
<li>Code reviewer: As PRs came in, I would conduct code reviews on each of them, and would discuss with them where to adjust the code to adhere to code style standards. </li>
<li>Continuous integration pipeline babysitter: Because I had just switched us off from Travis CI to Azure Pipelines, I was babysitting the pipelines to make sure nothing went wrong. (Spoiler: something did!) </li>
<li>Green button pusher: Once all tests passed, I would hit the big green button to merge PRs!</li>
</ol>
<p>If I get to sprint with other experienced contributors at the sprints, I would definitely like to have some help with the above.</p>
<h2 id="thoughts">Thoughts</h2><h3 id="making-sprints-human-friendly">Making sprints human-friendly</h3><p>I tried out a few ideas, which I hope made the sprints just that little bit more human-friendly.</p>
<ol>
<li>Used large Post-It easel pads to write out commonly-used commands at the terminal.</li>
<li>Displayed claimed seating arrangements at the morning, and more importantly, get to know every sprinter's name.</li>
<li>Announcing every PR to the group that was merged and what the content was, followed by a round of applause.</li>
<li>Setting a timer for 5 minutes before lunch so that they could all get ahead in the line.</li>
<li>I used staff privileges to move the box of leftover bananas into our sprint room. :)</li>
</ol>
<p>I think the applause is the most encouraging part of the process. Having struggled through a PR, however big or small, and having group recognition for that effort, is super encouraging, especially for first-time contributors. I think we need to encourage this more at sprints.</p>
<h3 id="relinquishing-control">Relinquishing control</h3><p>The only things about the pyjanitor project that I'm unwilling to give up on are: good documentation of what a function does, that a function should do one thing well, and that it be method-chainable. Everything else, including functionality, is an open discussion that we can have!</p>
<p>One PR I particularly enjoyed was that from Lucas, who PR'd in a logo for the project on the docs page. He had the idea to take the hacky broomstick I drew on the big sticky note (as a makeshift logo), redraw it as a vector graphic in Inkscape, and PR it in as the (current) official logo on the docs.</p>
<p>More broadly, I deferred to the sprinters' opinions on docs, because I recognized that I'd have old eyes on the docs, and wouldn't be able to easily identify places where the docs could be written more clearly. Eventually, a small, self-organizing squad of 3-5 sprinters ended up becoming the unofficial docs squad, rearranging the structure of the docs, building automation around it, and better organizing and summarizing the information on the docs.</p>
<p>In more than a few places, if there were a well-justified choice for the API (which really meant naming the functions and keyword arguments), I'd be more than happy to see the PR happen. Even if it is evolved away later, the present codebase and PRs that led to it provided the substrate for better evolution of the API!</p>
<h3 id="a-new-microsoft">A new Microsoft</h3><p>This year, I switched from Travis CI to Azure Pipelines. In particular, I was attracted to the ability to build on all three major operating systems, Windows, macOS, and Linux, on the free tier.</p>
<p>Microsoft had a booth at PyCon, in which Steve Dowell led an initiative to get us set up with Azure-related tools. Indeed, as a major sponsor of the conference, this was one of the best swag given to us. Super practical, relationship- and goodwill-building. Definitely not lesser than the Adafruit lunchboxes with electronics as swag!</p>
<h3 id="hiccups">Hiccups</h3><p>Naturally, not everything was smooth sailing throughout. I did find myself a tad expressing myself in an irate fashion at times with the amount of context switching that I was doing, especially switching between talking to different sprinters one after another. (I am very used to long stretches hacking on one problem.) One thing future sprinters could help with, which I will document, is to give me enough ramp-up context around their problem, so that I can quickly pinpoint what other information I might need.</p>
<p>The other not-so-smooth-sailing thing was finding out that Azure sometimes did not catch errors in a script block! My unproven hypothesis at this point is that if I have four commands executed in a script block, and if any of the first three fail but the last one passes, the entire script block will behave as if it passes. This probably stems from the build system looking at only the last exit code to determine exit status. Eventually, after splitting each check into individual steps, linting and testing errors started getting caught automatically! (Automating this is much preferred to me running the <code>black</code> code formatter in my head.)</p>
<p>Though the above issue is fixed, I think I am still having issues getting <code>pycodestyle</code> and <code>black</code> to work on the Windows builds. Definitely looking forward to hearing from Azure devs what could be done here!</p>
<h2 id="suggestions">Suggestions</h2><p>I'm sure there's ways I could have made the sprint a bit better.  I'd love to hear them if there's something I've missed! Please feel free to comment below.</p>
<h2 id="sprinter-acknowledgement">Sprinter Acknowledgement</h2><p>I would like to thank all the sprinters who joined in this sprint. Their GitHub handles are below:</p>
<ul>
<li>@HectorM14 (who was remote!)</li>
<li>@jekwatt</li>
<li>@kurtispinkney</li>
<li>@lphk92</li>
<li>@jonnybazookatone</li>
<li>@SorenFrohlich</li>
<li>@dave-frazzetto</li>
<li>@dsouzadaniel</li>
<li>@Eidhagen</li>
<li>@mdini</li>
<li>@kimt33</li>
<li>@jack-kessler-88</li>
<li>@NapsterInBlue</li>
<li>@jk3587</li>
<li>@ricky-lim</li>
<li>@catherinedevlin</li>
<li>@StephenSchroed</li>
</ul>
<p>And as always, big thanks to my collaborators on the repository:</p>
<ul>
<li>@zbarry</li>
<li>@szuckerman</li>
</ul>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2019/5/8/pycon-2019-sprints/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- Import stylesheet -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>

  <!-- Set title style -->
  
    <h1><a href="../../../blog/2019/4/29/pycon-2019-pre-journey/">PyCon 2019 Pre-Journey</a></h1>
  

  <!-- Append author -->
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2019-04-29
  
  </p>
  <!-- Append tags after author -->
  <p>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/pycon/">
          pycon
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/python/">
          python
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/data science/">
          data science
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/conferences/">
          conferences
      </a>
      
  </p>
  

  <!-- Put post body -->
  <p>I'm headed out to <a href="https://us.pycon.org/2019">PyCon 2019</a>! This year, I will be co-instructing two tutorials, one on network analysis and one on Bayesian statistics, and delivering one talk on Bayesian statistics.</p>
<p>The first tutorial on <a href="https://us.pycon.org/2019/schedule/presentation/70/">network analysis</a> is based on <a href="https://github.com/ericmjl/Network-Analysis-Made-Simple">material that I first developed</a> 5 years ago, and have continually updated. I've enjoyed teaching this tutorial because it represents a different way of thinking about data - in other words, relationally. This year, I will be a co-instructor for <a href="https://twitter.com/Mridul_Seth">Mridul</a>, who has kindly agreed to step up and teach it this year at PyCon. The apprentice has exceeded the master!</p>
<p>The second tutorial on <a href="https://us.pycon.org/2019/schedule/presentation/77/">Bayesian statistics</a> is based on <a href="https://github.com/ericmjl/bayesian-stats-modelling-tutorial">material co-developed</a> with <a href="https://twitter.com/hugobowne">Hugo Bowne-Anderson</a>. Hugo is a mathematician by training, a pedagogy master, and data science aficionado. Like myself, he is a fan of Bayesian statistical modelling methods, and we first debuted the tutorial past year at SciPy. We're super excited for this one!</p>
<p>The talk that I will deliver is on <a href="https://us.pycon.org/2019/schedule/presentation/174/">Bayesian statistical analysis of case/control tests</a>. In particular, I noticed a content gap in the data science talks, where case/control comparisons were limited to one case and one control. One epiphany I came to was that if we use Bayesian methods to analyze our data, there's no particular reason to limit ourselves to one case and one control; we can flexibly model multiple cases vs. one control, or even multiple cases vs multiple different controls in the same analysis, in a fashion that is flexible and principled.</p>
<p>My final involvement with PyCon this year is as Financial Aid Chair. This is the first year that I'm leading the FinAid effort; during previous years, I had learned a ton from the previous chair Karan Goel. My co-chairs this year are Denise Williams and Jigyasa Grover; I'm looking forward to meeting them in 3D!</p>
<p>All-in-all, I'm looking forward to another fun year at PyCon!</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2019/4/29/pycon-2019-pre-journey/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- Import stylesheet -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>

  <!-- Set title style -->
  
    <h1><a href="../../../blog/2019/3/24/variance-explained/">Variance Explained</a></h1>
  

  <!-- Append author -->
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2019-03-24
  
  </p>
  <!-- Append tags after author -->
  <p>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/data science/">
          data science
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/machine learning/">
          machine learning
      </a>
      
  </p>
  

  <!-- Put post body -->
  <p>Variance explained, as a regression quality metric, is one that I have begun to like a lot, especially when used in place of a metric like the correlation coefficient (r<sup>2</sup>).</p>
<p>Here's variance explained defined:</p>
<p>
$$1 - \frac{var(y_{true} - y_{pred})}{var(y_{true})}$$
</p><p>Why do I like it? It’s because this metric gives us a measure of the scale of the error in predictions relative to the scale of the data.</p>
<p>The numerator in the fraction calculates the variance in the errors, in other words, the <em>scale of the errors</em>. The denominator in the fraction calculates the variance in the data, in other words, the <em>scale of the data</em>. By subtracting the fraction from 1, we get a number upper-bounded at 1 (best case), and unbounded towards negative infinity.</p>
<p>Here's a few interesting scenarios.</p>
<ul>
<li>If the scale of the errors is small relative to the scale of the data, then variance explained will be close to 1.</li>
<li>If the scale of the errors is about the same scale as the data, then the variance explained will be around 0. This essentially says our model is garbage.</li>
<li>If the scale of the errors is greater than the scale of the data, then the variance explained will be negative. This is also an indication of a garbage model.</li>
</ul>
<p>A thing that is <em>really nice</em> about variance explained is that it can be used to compare related machine learning tasks that have different unit scales, for which we want to compare how good one model performs across all of the tasks. Mean squared error makes this an apples-to-oranges comparison, because the unit scales of each machine learning task is different. On the other hand, variance explained is unit-less.</p>
<p>Now, we know that single metrics can have failure points, as does the coefficient of correlation r^2^, as shown in Ansecombe's quartet and the Datasaurus Dozen:</p>
<p><img src="https://d2f99xq7vri1nk.cloudfront.net/Anscombe_1_0_0.png" alt="Ansecombe&#39;s quartet, taken from Autodesk Research"></p>
<p><em>Fig. 1: Ansecombe's quartet, taken from Autodesk Research</em></p>
<p><img src="https://blog.revolutionanalytics.com/downloads/DataSaurus%20Dozen.gif" alt="Datasaurus Dozen, taken from Revolution Analytics"></p>
<p><em>Fig. 2: Datasaurus Dozen, taken from Revolution Analytics</em></p>
<p>One place where the variance explained can fail is if the predictions are systematically shifted off from the true values. Let's say prediction was shifted off by 2 units.</p>
<p>
$$var(y_{true} - y_{pred}) = var([2, 2, ..., 2]) = 0$$
</p><p>There's no variance in errors, even though they are systematically shifted off from the true prediction. Like r<sup>2</sup>, variance explained will fail here.</p>
<p>As usual, <a href="https://en.wikipedia.org/wiki/Anscombe%27s_quartet">Ansecombe's quartet</a>, as does <a href="https://www.autodeskresearch.com/publications/samestats">The Datasaurus Dozen</a>, gives us a pertinent reminder that visually inspecting your model predictions is always a good thing!</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2019/3/24/variance-explained/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- Import stylesheet -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>

  <!-- Set title style -->
  
    <h1><a href="../../../blog/2019/3/22/functools-partial/">Functools Partial</a></h1>
  

  <!-- Append author -->
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2019-03-22
  
  </p>
  <!-- Append tags after author -->
  <p>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/python/">
          python
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/hacks/">
          hacks
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/tips and tricks/">
          tips and tricks
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/data science/">
          data science
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/productivity/">
          productivity
      </a>
      <i class="fas fa-tag"></i>
      <a href="../../../blog/tag/coding/">
          coding
      </a>
      
  </p>
  

  <!-- Put post body -->
  <p>If you’ve done Python programming for a while, I think it pays off to know some little tricks that can improve the readability of your code and decrease the amount of repetition that goes on.</p>
<p>One such tool is <code>functools.partial</code>. It took me a few years after my first introduction to <code>partial</code> before I finally understood why it was such a powerful tool.</p>
<p>Essentially, what <code>partial</code> does is it wraps a function and sets a keyword argument to a constant. That’s it. What do we mean?</p>
<p>Here’s a minimal example. Let’s say we have a function <code>f</code>, not written by me, but provided by someone else.</p>
<div class="hll"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="c1"># do something with a and b.</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
<p>In my code, let’s say that I know that the value that <code>b</code> takes on in my app is always the tuple <code>(1, 'A')</code>. I now have a few options. The most obvious is assign the tuple <code>(1, 'A')</code> to a variable, and pass that in on every function call:</p>
<div class="hll"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="n">result1</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">)</span>
<span class="c1"># do some stuff.</span>
<span class="n">result2</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">)</span>
<span class="c1"># do more stuff.</span>
<span class="c1"># ad nauseum</span>
<span class="n">N</span> <span class="o">=</span> <span class="c1"># set value of N</span>
<span class="n">resultN</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">N</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">)</span>
</pre></div>
<p>The other way I could do it is use <code>functools.partial</code> and just set the keyword argument <code>b</code> to equal to the tuple directly.</p>
<div class="hll"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="n">f_</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">))</span>
</pre></div>
<p>Now, I can repeat the code above, but now only worrying about the keyword argument <code>a</code>:</p>
<div class="hll"><pre><span></span><span class="n">result1</span> <span class="o">=</span> <span class="n">f_</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># do some stuff.</span>
<span class="n">result2</span> <span class="o">=</span> <span class="n">f_</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="c1"># do more stuff.</span>
<span class="c1"># ad nauseum</span>
<span class="n">N</span> <span class="o">=</span> <span class="c1"># set value of N</span>
<span class="n">resultN</span> <span class="o">=</span> <span class="n">f_</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">N</span><span class="p">)</span>
</pre></div>
<p>And there you go, that’s basically how <code>functools.partial</code> works in a nutshell.</p>
<p>Now, where have I used this in real life?</p>
<p>The most common place I have used it is in Flask. I have built Flask apps where I need to dynamically keep my Bokeh version synced up between the Python and JS libraries that get called. To ensure that my HTML templates have a consistent Bokeh version, I use the following pattern:</p>
<div class="hll"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh</span> <span class="kn">import</span> <span class="n">__version__</span> <span class="k">as</span> <span class="n">bkversion</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span> 

<span class="n">render_template</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">render_template</span><span class="p">,</span> <span class="n">bkversion</span><span class="o">=</span><span class="n">bkversion</span><span class="p">)</span>

<span class="c1"># Flask app boilerplate</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">home</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">&#39;index.html.j2&#39;</span><span class="p">)</span>
</pre></div>
<p>Now, because I always have <code>bkversion</code> pre-specified in <code>render_template</code>, I never have to repeat it over every <code>render_template</code> function call.</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2019/3/22/functools-partial/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  

  
  <div class="pagination">
    
      <a href="../../../blog/page/4/">&laquo; Previous</a>
    
    | 5 |
    
      <a href="../../../blog/page/6/">Next &raquo;</a>
    
  </div>


    </div>

    <nav class="navbar navbar-expand-sm navbar-light fixed-bottom bg-light">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#external-links" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="external-links">
            <ul class="navbar-nav mr-auto">
                
                <li class="nav-item">
                    <a class="nav-link" href="https://www.linkedin.com/in/ericmjl"><i class="fab fa-linkedin" aria-hidden="true"></i> LinkedIn</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://twitter.com/ericmjl"><i class="fab fa-twitter" aria-hidden="true"></i> Twitter</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://github.com/ericmjl"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://stackoverflow.com/users/1274908/ericmjl"><i class="fab fa-stack-overflow" aria-hidden="true"></i> Stack Overflow</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://shortwhale.com/ericmjl"><i class="far fa-envelope" aria-hidden="true"></i> Contact Me</a>
                </li>
                
            </ul>
        </div>
    </nav>
    <!-- Boostrap JS imports -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
</body>
