<!doctype html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <!-- Bootstrap v4beta Imports -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

    <style media="screen">
        body {
            padding-top: 70px;
            padding-bottom: 70px;
        }
    </style>

    <!-- Syntax Highlighter. Use both pygments and hl.js. -->
    <link rel="stylesheet" href="../../../static/pygments.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- Google Analytics -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-12498603-2', 'auto');
        ga('send', 'pageview');
    </script>

    <!-- ClustrMaps Tracking -->
    <!-- <script type="text/javascript" id="clstr_globe" src="//cdn.clustrmaps.com/globe.js?d=nhKoDpoTjWz4pC6CwI-fSy4hPoJ1uXwTLCfMCT3OK_8"></script> -->

    <!-- FontAwesome embed -->
    <script src="https://use.fontawesome.com/cb9dbe8e41.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/custom.css">
</head>

<title>Blog - Eric J. Ma's Personal Site</title>
<body class="body">
    <nav class="navbar navbar-expand-sm navbar-light fixed-top bg-light">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#local-links" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="local-links">
            <ul class="navbar-nav mr-auto">
                
                <li class="nav-item">
                    <a class="nav-link" href="/"><i class="fa fa-home" aria-hidden="true"></i> Home</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/resume"><i class="fa fa-file-text" aria-hidden="true"></i> Resume</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/blog"><i class="fa fa-rss" aria-hidden="true"></i> Blog</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/open-source"><i class="fa fa-code" aria-hidden="true"></i> Open Source</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/projects"><i class="fa fa-briefcase" aria-hidden="true"></i> Projects</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/talks"><i class="fa fa-microphone" aria-hidden="true"></i> Talks</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/teaching"><i class="fa fa-university" aria-hidden="true"></i> Teaching</a>
                </li>
                
            </ul>
        </div>
    </nav>
    <div class="container">
        
  
    
  <!-- <div class="blog-post"> -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>
  
    <h1><a href="../../../blog/2015/5/30/how-to-do-testing-as-a-practice-in-data-analysis/">How to do Testing as a Practice in Data Analysis</a></h1>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2015-05-30
  </p>
  <p>Recently, I’ve just wrapped up the data analysis tasks for one of my projects, and have finally finished the writing up to the stage of being ready for submission. I’m still going to choose to keep it under wraps until it finally gets published somewhere - don’t want to count chickens before they’re hatched! But the paper isn’t the main point of this post; the main point is on the importance of doing tests as part of the data analysis workflow, especially for large data analysis.</p>
<h3 id="why-data-testing?">Why “data testing”?</h3><p>Data comes to us analytics-minded people - but rarely is it structured, cleaned, and ready for analysis & modelling. Even if it were generated by machines, there may be bugs in the data - and by bugs, I mean things we didn’t expect to see about the data. Therefore, I think it’s important for us to check our assumptions about the data, prior to and during analysis, to catch anything that is out of whack. I would argue that the best way to do this is by employing an “automated testing” mindset and framework. Doing this builds a list of data integrity checks that can speed up the catching of bugs during the analysis process, can provide feedback to the data providers/generators. In the event that the data gets updated, we can automatically check the integrity of the datasets that we work with prior to proceeding.</p>
<h3 id="how-to-begin-data-testing?">How to begin data testing?</h3><p>As I eventually found out through experience, doing data tests isn’t hard at all. The core requirements are:</p>
<ol>
<li>An automated testing package (e.g. <code>pytest</code>)</li>
<li>A Python script called <code>test_data.py</code>, with functions that express the assumptions one is making about the data.</li>
</ol>
<p>To get started, ensure that you have Python installed. As usual, I recommend the Anaconda distribution of Python. Once that is installed, install the <code>pytest</code> package by typing in your Terminal: <code>conda install pytest</code>.</p>
<p>Once that is done, in your folder, created a blank script called <code>test_data.py</code>. In this script, you will write functions that express the data integrity tests for your data.</p>
<p>To illustrate some of the basic logic behind testing, I have provided a Github repository of some test data and an example script. The material is available on <a href="https://github.com/ericmjl/data-testing-tutorial">https://github.com/ericmjl/data-testing-tutorial</a>. To use this ‘tutorial’ material, you can clone the repo to disk, and install the dependencies mentioned on the Github site.</p>
<p>The example data set provided is a Divvy data set, which is a simple data set on which we can do some tests. There is a clean data set, and a corrupt data set in which one cell of the CSV file has a “hello”, and another cell has a “world” present in the <code>longitude</code> and <code>latitude</code> columns, defying what one would expect about two of the data columns. If you inspect the data, you will see that there are different columns present.</p>
<p>To begin testing the data, we can write in the following lines of code in the <code>test_data.py</code>:</p>
<pre><code>import pandas as pd 
data = pd.read_csv('data/Divvy_Stations_2013.csv', index_col=0)
def test_column_latitude_dtype():
    """
    Checks that the dtype of the 'Latitude' column is a float.
        """
    assert data[’atitude’].dtype == float
</code></pre>
<p>If you fire up a Terminal window, <code>cd</code> into the <code>data-testing-tutorial</code> directory, and execute <code>py.test</code>. You should see the following terminal output: <strong><code>1 passed in 0.53 seconds</code></strong>.</p>
<p>If you now change the function to check the <code>data_corrupt</code> DataFrame, such that the assert statement is:</p>
<pre><code>    assert data_corrupt['altitude'].dtype == float
</code></pre>
<p>The <code>py.test</code> output should include the error message:</p>
<pre><code>&gt; assert df['latitude'].dtype == float
E assert dtype('O') == float
</code></pre>
<p>At this point, because the assertion statement failed, you would thus know that the data suffered a corruption.</p>
<p>In this case, there is only one data set that is of interest. However, if you find that it’s important to test more than one file of a similar data set, you can encapsulate the test code in a function call embedded in the test function as such:</p>
<pre><code>def test_column_latitude_dtype():
    ”””
    Checks that the dtype of the 'Latitude' column is a float.
    ”””
    def column_latitude_dtype(df):
        assert df['latitude'].dtype == float
    column_latitude_dtype(data)
    column_latitude_dtype(data_corrupt)
</code></pre>
<p>In this way, you would be testing all of the data files together. You can also opt to do similar encapsulation, abstraction etc. if it helps with automating the test cases. As one speaker once said (as far as my memory can recall), if you use the same block of code twice, encapsulate it in a function.</p>
<h3 id="how-to-continue-testing?">How to continue testing?</h3><p>You can extend the script by adding more test functions. <code>py.test</code> is able to do automated test discovery, by looking for the <code>test_</code> prefix to a function. Therefore, simply make sure all of your test functions have the <code>test_</code> prefix before them.</p>
<p>Need some ideas on when to add more tests?</p>
<ol>
<li>Any time you come up against a bug in your data, add a test.</li>
<li>Any time you think of a new assumption you’re making about the data, add a test.</li>
</ol>
<p>Happy Testing! :D</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2015/5/30/how-to-do-testing-as-a-practice-in-data-analysis/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- <div class="blog-post"> -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>
  
    <h1><a href="../../../blog/2015/5/29/pycon-2015-a-long-overdue-report/">PyCon 2015 - A Long-Overdue Report</a></h1>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2015-05-29
  </p>
  <p>This year, I had the privilege of attending PyCon 2015 as a tutorial instructor again. Unlike last year, which was an eye-opener for me, this year, I decided to take a more educational approach, and set a goal to learn as much new things about programming in Python that I didn't previously know.</p>
<h3 id="old/new-things-i-re-/learned">Old/New things I re-/learned</h3><p>In no order of importance:</p>
<ol>
<li>Inspired by JakeVDP’s talk: Use <code>numpy</code> functions whenever possible! And try to cast your data/analysis problems in terms of matrices for massive speedups. Re-implementing one problem that I had tried, I experienced a million-fold speedup using <code>numpy</code> compared to pure Python loops. A million fold!</li>
<li>Testing, a practice primarily found in the software development world, is really important for data analytics! I will have a blog post on this coming.</li>
<li>The top data scientists’ workflows sometimes involve weird things like “averaging” multiple models. I think this is simultaneously a blessing and a curse. A blessing because it gets us answers that we need; a curse because it tells us nothing about how the world works. Maybe I’m a bit too much of a scientist. (Update: Booz Allen Hamilton speaker @ today's ODSC said we have to know how the world works, and not just stop at describe what the world looks like. The best comment I've heard to date!)</li>
<li>Network analysis is a trending topic, given the tutorials and talks that I saw. I will update my network analysis tutorial and re-apply for next year as a tutorial instructor. I do wish I could have gone for Sarah Guido’s tutorial.</li>
<li>Continuum Analytics is a company with vision and doing exciting stuff. Props to Travis and his team! I love what they’re doing, building tools for developers and analytics people. I wish them many good years ahead as a company! :)</li>
<li><code>bokeh</code>, built by Continuum Analytics, is pretty awesome.</li>
</ol>
<h3 id="incidents-and-infections">Incidents and Infections</h3><p>I had a norovirus infection, and was suffering the symptoms (diarrhea, fever, and fatigue) on the bus to MTL. The symptoms persisted right up to the point my tutorial was due to start. Miraculously, thank God for that, I was able to hold on throughout the tutorial without needing to go to the bathroom once - and I don’t think I passed it to anybody. I collapsed on a couch outside the lunch area in the afternoon, and was spotted by security… “Monsieur? Monsieur?” I hastily grabbed my badge and uttered, “Oui, oui, Pycon!”, which readily stress-tested the extent of my French language knowledge. At thtat point, I went back to the hotel and collapsed again, for 16 hours.</p>
<h3 id="cool-people">Cool People</h3><p>Again, in no particular order:</p>
<ol>
<li>Travis Oliphant and Peter Wang, Continuum Analytics</li>
<li>Jake van der Plas, eScience Institute @ UW</li>
<li>Stuart Williams and Ruben Orduz, Tutorial Coordinators</li>
</ol>
<h3 id="feelings">Feelings</h3><p>I’d do PyCon 2016! Hopefully I will have new things that I can share with the community next year. I’m also hoping to be able to do a network analysis &amp; statistics tutorial at SciPy 2016, wherever that may be held.</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2015/5/29/pycon-2015-a-long-overdue-report/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- <div class="blog-post"> -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>
  
    <h1><a href="../../../blog/2015/5/1/the-roost-stand/">The Roost Stand</a></h1>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2015-05-01
  </p>
  <p>A while ago, I backed the Roost Stand on Kickstarter. Of all the things I’ve backed so far, I think the Roost Stand is the only one that I’d consider an investment.</p>
<p>It’s saved my neck from countless hours of pain, especially when working from home.</p>
<p><img src="../../../blog/2015/5/1/the-roost-stand/roost-home-320px.jpg" alt="roost-home"></p>
<p>It's a daily feature of my workstation.</p>
<p><img src="../../../blog/2015/5/1/the-roost-stand/roost-desk-320px.jpg" alt="roost-work"></p>
<p>It’s turned coffee shop tables into workstations.</p>
<p><img src="../../../blog/2015/5/1/the-roost-stand/roost-starbucks-320px.jpg" alt="roost-starbucks"></p>
<p>Taking it around is really portable as well!</p>
<p><img src="../../../blog/2015/5/1/the-roost-stand/roost-to-go-320px.jpg" alt="roost-to-go"></p>
<p>Can’t wait to see what the Roost makers have up their sleeves next!</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2015/5/1/the-roost-stand/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- <div class="blog-post"> -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>
  
    <h1><a href="../../../blog/2015/4/3/semantic-versioning-for-papers-a-manifesto/">Semantic Versioning for Papers: A Manifesto</a></h1>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 2015-04-03
  </p>
  <p>In writing the current paper I’m working on, I have decided to adopt a semantic versioning scheme for each draft of the paper. There’s probably a ton out there, and I think I got a bit fed up with other versioning schemes where people tag on _INITIALS to the end of the file. Moreover, I found value in tracking the evolution of the paper - in other words, how does the final product look compared to the original? Therefore, I thought, why not adopt a numbering system that semantically makes sense, the same way that it works for code?</p>
<p>Shamelessly copying <a href="http://semver.org">http://semver.org</a>, here’s my proposed scheme.</p>
<p>Given a version number MAJOR.MINOR.PATCH, for a prose body of text, increment the:</p>
<ol>
<li>MAJOR version after each submission, to keep track of the number of times a paper has been submitted.</li>
<li>MINOR version after each:<ol>
<li>re-arrangement of logic, </li>
<li>large word-smithing or rephrasing of things, and</li>
<li>addition of new insights compared to the previous version</li>
</ol>
</li>
<li>PATCH version after making:<ol>
<li>grammatical or spelling changes</li>
<li>substitute individual words for other words</li>
</ol>
</li>
</ol>
<p>I will note that formatting is intentionally not dealt with here, but is assumed to be part of the MAJOR version increment when formatting a manuscript for submission. This is because a writer ought not to be concerned with formatting in the writing stages. A writer ought to be most concerned with getting his/her thoughts into prose form.</p>
<p>Now, for the figures, which I believe should be developed in parallel but separately from the text.</p>
<p>Given a version number MAJOR.MINOR.PATCH, for a document that lays out the organization of figures, increment the:</p>
<ol>
<li>MAJOR version after each submission.</li>
<li>MINOR version after each:<ol>
<li>addition, removal or rearrangement of figures,</li>
<li>changing of figure representations (i.e. scatterplot changed to 2D histogram),</li>
<li>major changes to the figure caption/legend</li>
</ol>
</li>
<li>PATCH version after each:<ol>
<li>grammatical or spelling changes, in the figure caption/legend,</li>
<li>minor word substitutions or additions/deletions in the figure caption/legend,</li>
<li>resizing of figures for aesthetic purposes.</li>
</ol>
</li>
</ol>
<p>So far, I have tried to keep the figure versions in sync with the text versions to keep things really simple. This system has worked well, as I usually do an export of both the text and the figures at the same time, incrementing whichever needs to be incremented accordingly. When this first manuscript is done, next steps would be to run a ‘diff’ to see how the final version differs from version 0.1.0. Can’t wait for that to happen!</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/2015/4/3/semantic-versioning-for-papers-a-manifesto/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  
    
  <!-- <div class="blog-post"> -->
  <link rel="stylesheet" href="../../../static/pygments.css">
  <div>
  
    <h1><a href="../../../blog/network-propagation/">Network Propagation</a></h1>
  
  <p class="meta">
    written by
    
      <a href="https://twitter.com/ericmjl">Eric J. Ma</a>
    
    on 
  </p>
  <h2 id="introduction">Introduction</h2><p>I recently read a <a href="http://www.nature.com/nrg/journal/vaop/ncurrent/abs/nrg.2017.38.html">review paper on network propagation</a>. It looks like a very useful thing in data science, particularly where networks are involved, and I wanted to share it with everybody.</p>
<p>Before I go on, I will start off by assuming we have a dataset modelled as a "network", or a "graph", in which the nodes are entities in the graph, and edges are relationships between those entities. In the context of my work, I encounter biological networks of many kinds - gene-gene interactions, protein-protein interactions, protein-RNA interactions, evolutionary networks, and more.</p>
<p>What kind of problems can network propagation solve? The problem class generally follows this logic: I start with some nodes of interest, and I'm most interested in finding other nodes of interest based on these "seed" nodes. Knowing that path-based methods can often end up over-prioritizing highly connected nodes, we need a different principled method for finding these nodes. One way would be to take a random walk on the graph, and find out how often we land on a particular set of nodes on the graph. This random walk is what we call "network propagation".</p>
<h2 id="how-network-propagation-works">How network propagation works</h2><p>Network propagation follows this intuition: Imagine nodes contain information, and edges dictate which nodes information can be shared with. Network propagation shares the information with other nodes, according to the following rules:</p>
<ol>
<li>I can only share by copying to my neighbours in the graph,</li>
<li>I must share everything that I have with my neighbours, and</li>
<li>Exchanges in the graph happen simultaneously.</li>
</ol>
<p>An animation of how this works is shown below.</p>
<p>If you take my DataCamp course, you'll learn that networks can be represented as matrices on a computer. The adjacency matrix can be a 1/0 (i.e. binary) matrix that describes how nodes (rows and columns) are connected, and nodes can have their own vector of information (i.e. whether they are "seed" nodes or not). As it turns out, network propagation has a very nice matrix representation:</p>
<h2 id="how-to-implement-network-propagation">How to implement network propagation</h2><p>So, how do we do network propagation with NetworkX, <code>numpy</code> and Python? Let's take a look at code. Firstly, <strong>how do you convert a graph to a <code>numpy</code> matrix</strong>?</p>
<div class="hll"><pre><span></span><span class="c1"># Assume we have a graph G. Convert it to a numpy matrix.</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">A</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">to_numpy_matrix</span><span class="p">(</span><span class="n">G</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">A</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span>
<span class="n">matrix</span><span class="p">([[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">1.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">1.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">]])</span>
</pre></div>
<p>This basically corresponds to the following graph:</p>
<p><img src="../../../blog/network-propagation/graph.png" alt=""></p>
<p>Great! Now, let's mark out some "seed" nodes. These are the "nodes" of interest. To represent this, we use a binary vector - each slot in the vector represents one node in the graph. Let's start by highlighting two nodes, the second and third one:</p>
<div class="hll"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">M</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
<p>The <code>.reshape(A.shape[0], 1)</code> is done for convenience, so that each axis is aligned appropriately for the following matrix multiplication:</p>
<div class="hll"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">A</span> <span class="err">@</span> <span class="n">M</span>
<span class="n">matrix</span><span class="p">([[</span> <span class="mf">1.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">0.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">0.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">1.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">1.</span><span class="p">]])</span>
</pre></div>
<p>After the end of one round, nodes 2 and 3 have no information held on them, but their neighbours do. Let's do two rounds of propagation, rather than just one.</p>
<div class="hll"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">A</span> <span class="err">@</span> <span class="p">(</span><span class="n">A</span> <span class="err">@</span> <span class="n">M</span><span class="p">)</span>
<span class="n">matrix</span><span class="p">([[</span> <span class="mf">2.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">1.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">2.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">2.</span><span class="p">],</span>
        <span class="p">[</span> <span class="mf">2.</span><span class="p">]])</span>
</pre></div>
<p>After two rounds of information, information is shared back with the original nodes, but not necessarily evenly - it all depends on the connectivity of each node.</p>
<p>It'll get really verbose doing 100 rounds; imagine doing <code>A @ (A @ (A @ (A @ .....)))</code>. Instead of doing that, a recursive function may be better. At the same time, with many rounds of network propagation, we will end up with really large numbers. Therefore, it will be helpful to also normalize the result of matrix multiplication.</p>
<div class="hll"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">return</span> <span class="n">arr</span> <span class="o">/</span> <span class="n">arr</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="k">def</span> <span class="nf">recursive_propagate</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">if</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
   <span class="o">...</span><span class="p">:</span>         <span class="k">return</span> <span class="n">recursive_propagate</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">normalize</span><span class="p">(</span><span class="n">A</span> <span class="err">@</span> <span class="n">M</span><span class="p">),</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
   <span class="o">...</span><span class="p">:</span>     <span class="k">else</span><span class="p">:</span>
   <span class="o">...</span><span class="p">:</span>         <span class="k">return</span> <span class="n">normalize</span><span class="p">(</span><span class="n">A</span> <span class="err">@</span> <span class="n">M</span><span class="p">)</span>
   <span class="o">...</span><span class="p">:</span>
</pre></div>
<p>On a previous blog post, I've alluded to the fact that recursive functions are pretty darn useful!</p>
<h2 id="result">Result</h2><p>So, let's take a look at the result of a few rounds of propagation.</p>
<p><img src="../../../blog/network-propagation/figure_1_sm.png" alt=""></p>
<p>The first thing that I'd like to highlight is that the information propagation process converges on a final result fairly quickly. The second thing I'd like to highlight is that the purple nodes (there are two lines!), which weren't highlighted at the start, ended up having the highest propagation scores, followed by the red node.</p>
<p>For those who are familiar with Markov chains, I believe network propagation has strong parallels with that.</p>
<h2 id="conclusion">Conclusion</h2><p>Network propagation is conceptually simple, and easy to implement in Python.</p>

  </div>

    <p><i>Did you enjoy this blog post? <a href="../../../blog/network-propagation/#disqus">Let's discuss more</a>!</i></p>
    <hr class="fancy">
  

  
  <div class="pagination">
    
      <a href="../../../blog/page/28/">&laquo; Previous</a>
    
    | 29 |
    
      <span class="disabled">Next &raquo;</span>
    
  </div>


    </div>

    <nav class="navbar navbar-expand-sm navbar-light fixed-bottom bg-light">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#external-links" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="external-links">
            <ul class="navbar-nav mr-auto">
                
                <li class="nav-item">
                    <a class="nav-link" href="https://www.linkedin.com/in/ericmjl"><i class="fa fa-linkedin" aria-hidden="true"></i> LinkedIn</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://twitter.com/ericmjl"><i class="fa fa-twitter" aria-hidden="true"></i> Twitter</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://github.com/ericmjl"><i class="fa fa-github" aria-hidden="true"></i> GitHub</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://stackoverflow.com/users/1274908/ericmjl"><i class="fa fa-stack-overflow" aria-hidden="true"></i> Stack Overflow</a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="http://shortwhale.com/ericmjl"><i class="fa fa-envelope-o" aria-hidden="true"></i> Contact Me</a>
                </li>
                
            </ul>
        </div>
    </nav>
    <!-- Boostrap JS imports -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

</body>
